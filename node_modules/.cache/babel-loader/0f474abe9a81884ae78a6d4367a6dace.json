{"remainingRequest":"D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\node_modules\\babel-loader\\lib\\index.js!D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\src\\router.js","dependencies":[{"path":"D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\src\\router.js","mtime":1627984463235},{"path":"D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\LEARN\\DOANTOTNGHIEP\\vueJS\\Vue\\vue-3-authentication-jwt\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCB7IGNyZWF0ZVdlYkhpc3RvcnksIGNyZWF0ZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgSG9tZSBmcm9tICIuL2NvbXBvbmVudHMvSG9tZS52dWUiOwppbXBvcnQgTG9naW4gZnJvbSAiLi9jb21wb25lbnRzL0xvZ2luLnZ1ZSI7CmltcG9ydCBSZWdpc3RlciBmcm9tICIuL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsgLy8gbGF6eS1sb2FkZWQKCnZhciBQcm9maWxlID0gZnVuY3Rpb24gUHJvZmlsZSgpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvUHJvZmlsZS52dWUiKTsKfTsKCnZhciBCb2FyZEFkbWluID0gZnVuY3Rpb24gQm9hcmRBZG1pbigpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvQm9hcmRBZG1pbi52dWUiKTsKfTsKCnZhciBCb2FyZE1vZGVyYXRvciA9IGZ1bmN0aW9uIEJvYXJkTW9kZXJhdG9yKCkgewogIHJldHVybiBpbXBvcnQoIi4vY29tcG9uZW50cy9Cb2FyZE1vZGVyYXRvci52dWUiKTsKfTsKCnZhciBCb2FyZFVzZXIgPSBmdW5jdGlvbiBCb2FyZFVzZXIoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi9jb21wb25lbnRzL0JvYXJkVXNlci52dWUiKTsKfTsKCnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICIvIiwKICBuYW1lOiAiaG9tZSIsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAiL2hvbWUiLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogIi9sb2dpbiIsCiAgY29tcG9uZW50OiBMb2dpbgp9LCB7CiAgcGF0aDogIi9yZWdpc3RlciIsCiAgY29tcG9uZW50OiBSZWdpc3Rlcgp9LCB7CiAgcGF0aDogIi9wcm9maWxlIiwKICBuYW1lOiAicHJvZmlsZSIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IFByb2ZpbGUKfSwgewogIHBhdGg6ICIvYWRtaW4iLAogIG5hbWU6ICJhZG1pbiIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IEJvYXJkQWRtaW4KfSwgewogIHBhdGg6ICIvbW9kIiwKICBuYW1lOiAibW9kZXJhdG9yIiwKICAvLyBsYXp5LWxvYWRlZAogIGNvbXBvbmVudDogQm9hcmRNb2RlcmF0b3IKfSwgewogIHBhdGg6ICIvdXNlciIsCiAgbmFtZTogInVzZXIiLAogIC8vIGxhenktbG9hZGVkCiAgY29tcG9uZW50OiBCb2FyZFVzZXIKfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkoKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIHB1YmxpY1BhZ2VzID0gWycvbG9naW4nLCAnL3JlZ2lzdGVyJywgJy9ob21lJ107CiAgdmFyIGF1dGhSZXF1aXJlZCA9ICFwdWJsaWNQYWdlcy5pbmNsdWRlcyh0by5wYXRoKTsKICB2YXIgbG9nZ2VkSW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOyAvLyB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlICsgbm90IGxvZ2dlZCBpbgogIC8vIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UKCiAgaWYgKGF1dGhSZXF1aXJlZCAmJiAhbG9nZ2VkSW4pIHsKICAgIG5leHQoJy9sb2dpbicpOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["D:/LEARN/DOANTOTNGHIEP/vueJS/Vue/vue-3-authentication-jwt/src/router.js"],"names":["createWebHistory","createRouter","Home","Login","Register","Profile","BoardAdmin","BoardModerator","BoardUser","routes","path","name","component","router","history","beforeEach","to","from","next","publicPages","authRequired","includes","loggedIn","localStorage","getItem"],"mappings":";;;;AAAA,SAASA,gBAAT,EAA2BC,YAA3B,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,QAAP,MAAqB,2BAArB,C,CACA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SACZ,OAAQ,0BAAR,CADY;AAAA,CAAhB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SACf,OAAQ,6BAAR,CADe;AAAA,CAAnB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SACnB,OAAQ,iCAAR,CADmB;AAAA,CAAvB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SACd,OAAQ,4BAAR,CADc;AAAA,CAAlB;;AAGA,IAAMC,MAAM,GAAG,CAAC;AACRC,EAAAA,IAAI,EAAE,GADE;AAERC,EAAAA,IAAI,EAAE,MAFE;AAGRC,EAAAA,SAAS,EAAEV;AAHH,CAAD,EAKX;AACIQ,EAAAA,IAAI,EAAE,OADV;AAEIE,EAAAA,SAAS,EAAEV;AAFf,CALW,EASX;AACIQ,EAAAA,IAAI,EAAE,QADV;AAEIE,EAAAA,SAAS,EAAET;AAFf,CATW,EAaX;AACIO,EAAAA,IAAI,EAAE,WADV;AAEIE,EAAAA,SAAS,EAAER;AAFf,CAbW,EAiBX;AACIM,EAAAA,IAAI,EAAE,UADV;AAEIC,EAAAA,IAAI,EAAE,SAFV;AAGI;AACAC,EAAAA,SAAS,EAAEP;AAJf,CAjBW,EAuBX;AACIK,EAAAA,IAAI,EAAE,QADV;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGI;AACAC,EAAAA,SAAS,EAAEN;AAJf,CAvBW,EA6BX;AACII,EAAAA,IAAI,EAAE,MADV;AAEIC,EAAAA,IAAI,EAAE,WAFV;AAGI;AACAC,EAAAA,SAAS,EAAEL;AAJf,CA7BW,EAmCX;AACIG,EAAAA,IAAI,EAAE,OADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGI;AACAC,EAAAA,SAAS,EAAEJ;AAJf,CAnCW,CAAf;AA2CA,IAAMK,MAAM,GAAGZ,YAAY,CAAC;AACxBa,EAAAA,OAAO,EAAEd,gBAAgB,EADD;AAExBS,EAAAA,MAAM,EAANA;AAFwB,CAAD,CAA3B;AAMAI,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,OAAxB,CAApB;AACA,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAZ,CAAqBL,EAAE,CAACN,IAAxB,CAAtB;AACA,MAAMY,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB,CAHkC,CAKlC;AACA;;AACA,MAAIJ,YAAY,IAAI,CAACE,QAArB,EAA+B;AAC3BJ,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACH,GAFD,MAEO;AACHA,IAAAA,IAAI;AACP;AACJ,CAZD;AAcA,eAAeL,MAAf","sourcesContent":["import { createWebHistory, createRouter } from \"vue-router\";\r\nimport Home from \"./components/Home.vue\";\r\nimport Login from \"./components/Login.vue\";\r\nimport Register from \"./components/Register.vue\";\r\n// lazy-loaded\r\nconst Profile = () =>\r\n    import (\"./components/Profile.vue\")\r\nconst BoardAdmin = () =>\r\n    import (\"./components/BoardAdmin.vue\")\r\nconst BoardModerator = () =>\r\n    import (\"./components/BoardModerator.vue\")\r\nconst BoardUser = () =>\r\n    import (\"./components/BoardUser.vue\")\r\n\r\nconst routes = [{\r\n        path: \"/\",\r\n        name: \"home\",\r\n        component: Home,\r\n    },\r\n    {\r\n        path: \"/home\",\r\n        component: Home,\r\n    },\r\n    {\r\n        path: \"/login\",\r\n        component: Login,\r\n    },\r\n    {\r\n        path: \"/register\",\r\n        component: Register,\r\n    },\r\n    {\r\n        path: \"/profile\",\r\n        name: \"profile\",\r\n        // lazy-loaded\r\n        component: Profile,\r\n    },\r\n    {\r\n        path: \"/admin\",\r\n        name: \"admin\",\r\n        // lazy-loaded\r\n        component: BoardAdmin,\r\n    },\r\n    {\r\n        path: \"/mod\",\r\n        name: \"moderator\",\r\n        // lazy-loaded\r\n        component: BoardModerator,\r\n    },\r\n    {\r\n        path: \"/user\",\r\n        name: \"user\",\r\n        // lazy-loaded\r\n        component: BoardUser,\r\n    },\r\n];\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes,\r\n});\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    const publicPages = ['/login', '/register', '/home'];\r\n    const authRequired = !publicPages.includes(to.path);\r\n    const loggedIn = localStorage.getItem('user');\r\n\r\n    // trying to access a restricted page + not logged in\r\n    // redirect to login page\r\n    if (authRequired && !loggedIn) {\r\n        next('/login');\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n\r\nexport default router;"]}]}