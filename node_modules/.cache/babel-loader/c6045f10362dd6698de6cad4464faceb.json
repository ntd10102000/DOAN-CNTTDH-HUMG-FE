{"remainingRequest":"D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\node_modules\\babel-loader\\lib\\index.js!D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\src\\router.js","dependencies":[{"path":"D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\src\\router.js","mtime":1628073921869},{"path":"D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Learn\\HUMG\\Do_An_Thay_Ngoc\\Practice\\vue-3-authentication-jwt\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCB7IGNyZWF0ZVdlYkhpc3RvcnksIGNyZWF0ZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgSG9tZSBmcm9tICIuL2NvbXBvbmVudHMvSG9tZS52dWUiOwppbXBvcnQgTG9naW4gZnJvbSAiLi9jb21wb25lbnRzL0xvZ2luLnZ1ZSI7CmltcG9ydCBSZWdpc3RlciBmcm9tICIuL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsgLy8gaW1wb3J0IFNob3dNYXBzIGZyb20gIi4vY29tcG9uZW50cy9TaG93TWFwcy52dWUiOwovLyBsYXp5LWxvYWRlZAoKdmFyIFByb2ZpbGUgPSBmdW5jdGlvbiBQcm9maWxlKCkgewogIHJldHVybiBpbXBvcnQoIi4vY29tcG9uZW50cy9Qcm9maWxlLnZ1ZSIpOwp9OwoKdmFyIEJvYXJkQWRtaW4gPSBmdW5jdGlvbiBCb2FyZEFkbWluKCkgewogIHJldHVybiBpbXBvcnQoIi4vY29tcG9uZW50cy9Cb2FyZEFkbWluLnZ1ZSIpOwp9OwoKdmFyIEJvYXJkTW9kZXJhdG9yID0gZnVuY3Rpb24gQm9hcmRNb2RlcmF0b3IoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi9jb21wb25lbnRzL0JvYXJkTW9kZXJhdG9yLnZ1ZSIpOwp9OwoKdmFyIEJvYXJkVXNlciA9IGZ1bmN0aW9uIEJvYXJkVXNlcigpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvQm9hcmRVc2VyLnZ1ZSIpOwp9OwoKdmFyIFNob3dNYXBzID0gZnVuY3Rpb24gU2hvd01hcHMoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi9jb21wb25lbnRzL1Nob3dNYXBzLnZ1ZSIpOwp9OwoKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJob21lIiwKICBjb21wb25lbnQ6IEhvbWUKfSwgewogIHBhdGg6ICIvaG9tZSIsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAiL2xvZ2luIiwKICBjb21wb25lbnQ6IExvZ2luCn0sIHsKICBwYXRoOiAiL3JlZ2lzdGVyIiwKICBjb21wb25lbnQ6IFJlZ2lzdGVyCn0sIHsKICBwYXRoOiAiL3Nob3dtYXBzLzpuYW1lIiwKICBuYW1lOiAic2hvd21hcHMiLAogIC8vIGxhenktbG9hZGVkCiAgY29tcG9uZW50OiBTaG93TWFwcywKICBwcm9wczogdHJ1ZQp9LCB7CiAgcGF0aDogIi9wcm9maWxlIiwKICBuYW1lOiAicHJvZmlsZSIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IFByb2ZpbGUKfSwgewogIHBhdGg6ICIvYWRtaW4iLAogIG5hbWU6ICJhZG1pbiIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IEJvYXJkQWRtaW4KfSwgewogIHBhdGg6ICIvbW9kIiwKICBuYW1lOiAibW9kZXJhdG9yIiwKICAvLyBsYXp5LWxvYWRlZAogIGNvbXBvbmVudDogQm9hcmRNb2RlcmF0b3IKfSwgewogIHBhdGg6ICIvdXNlciIsCiAgbmFtZTogInVzZXIiLAogIC8vIGxhenktbG9hZGVkCiAgY29tcG9uZW50OiBCb2FyZFVzZXIKfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkoKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIHB1YmxpY1BhZ2VzID0gWycvbG9naW4nLCAnL3JlZ2lzdGVyJywgJy9ob21lJ107CiAgdmFyIGF1dGhSZXF1aXJlZCA9ICFwdWJsaWNQYWdlcy5pbmNsdWRlcyh0by5wYXRoKTsKICB2YXIgbG9nZ2VkSW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOyAvLyB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlICsgbm90IGxvZ2dlZCBpbgogIC8vIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UKCiAgaWYgKGF1dGhSZXF1aXJlZCAmJiAhbG9nZ2VkSW4pIHsKICAgIG5leHQoJy9sb2dpbicpOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["D:/Learn/HUMG/Do_An_Thay_Ngoc/Practice/vue-3-authentication-jwt/src/router.js"],"names":["createWebHistory","createRouter","Home","Login","Register","Profile","BoardAdmin","BoardModerator","BoardUser","ShowMaps","routes","path","name","component","props","router","history","beforeEach","to","from","next","publicPages","authRequired","includes","loggedIn","localStorage","getItem"],"mappings":";;;;AAAA,SAASA,gBAAT,EAA2BC,YAA3B,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,QAAP,MAAqB,2BAArB,C,CACA;AAEA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SACZ,OAAQ,0BAAR,CADY;AAAA,CAAhB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SACf,OAAQ,6BAAR,CADe;AAAA,CAAnB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SACnB,OAAQ,iCAAR,CADmB;AAAA,CAAvB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SACd,OAAQ,4BAAR,CADc;AAAA,CAAlB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,SACb,OAAQ,2BAAR,CADa;AAAA,CAAjB;;AAGA,IAAMC,MAAM,GAAG,CAAC;AACRC,EAAAA,IAAI,EAAE,GADE;AAERC,EAAAA,IAAI,EAAE,MAFE;AAGRC,EAAAA,SAAS,EAAEX;AAHH,CAAD,EAKX;AACIS,EAAAA,IAAI,EAAE,OADV;AAEIE,EAAAA,SAAS,EAAEX;AAFf,CALW,EASX;AACIS,EAAAA,IAAI,EAAE,QADV;AAEIE,EAAAA,SAAS,EAAEV;AAFf,CATW,EAaX;AACIQ,EAAAA,IAAI,EAAE,WADV;AAEIE,EAAAA,SAAS,EAAET;AAFf,CAbW,EAiBX;AACIO,EAAAA,IAAI,EAAE,iBADV;AAEIC,EAAAA,IAAI,EAAE,UAFV;AAGI;AACAC,EAAAA,SAAS,EAAEJ,QAJf;AAKIK,EAAAA,KAAK,EAAE;AALX,CAjBW,EAwBX;AACIH,EAAAA,IAAI,EAAE,UADV;AAEIC,EAAAA,IAAI,EAAE,SAFV;AAGI;AACAC,EAAAA,SAAS,EAAER;AAJf,CAxBW,EA8BX;AACIM,EAAAA,IAAI,EAAE,QADV;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGI;AACAC,EAAAA,SAAS,EAAEP;AAJf,CA9BW,EAoCX;AACIK,EAAAA,IAAI,EAAE,MADV;AAEIC,EAAAA,IAAI,EAAE,WAFV;AAGI;AACAC,EAAAA,SAAS,EAAEN;AAJf,CApCW,EA0CX;AACII,EAAAA,IAAI,EAAE,OADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGI;AACAC,EAAAA,SAAS,EAAEL;AAJf,CA1CW,CAAf;AAmDA,IAAMO,MAAM,GAAGd,YAAY,CAAC;AACxBe,EAAAA,OAAO,EAAEhB,gBAAgB,EADD;AAExBU,EAAAA,MAAM,EAANA;AAFwB,CAAD,CAA3B;AAMAK,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,OAAxB,CAApB;AACA,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAZ,CAAqBL,EAAE,CAACP,IAAxB,CAAtB;AACA,MAAMa,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB,CAHkC,CAKlC;AACA;;AACA,MAAIJ,YAAY,IAAI,CAACE,QAArB,EAA+B;AAC3BJ,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACH,GAFD,MAEO;AACHA,IAAAA,IAAI;AACP;AACJ,CAZD;AAcA,eAAeL,MAAf","sourcesContent":["import { createWebHistory, createRouter } from \"vue-router\";\r\nimport Home from \"./components/Home.vue\";\r\nimport Login from \"./components/Login.vue\";\r\nimport Register from \"./components/Register.vue\";\r\n// import ShowMaps from \"./components/ShowMaps.vue\";\r\n\r\n// lazy-loaded\r\nconst Profile = () =>\r\n    import (\"./components/Profile.vue\")\r\nconst BoardAdmin = () =>\r\n    import (\"./components/BoardAdmin.vue\")\r\nconst BoardModerator = () =>\r\n    import (\"./components/BoardModerator.vue\")\r\nconst BoardUser = () =>\r\n    import (\"./components/BoardUser.vue\")\r\nconst ShowMaps = () =>\r\n    import (\"./components/ShowMaps.vue\")\r\n\r\nconst routes = [{\r\n        path: \"/\",\r\n        name: \"home\",\r\n        component: Home,\r\n    },\r\n    {\r\n        path: \"/home\",\r\n        component: Home,\r\n    },\r\n    {\r\n        path: \"/login\",\r\n        component: Login,\r\n    },\r\n    {\r\n        path: \"/register\",\r\n        component: Register,\r\n    },\r\n    {\r\n        path: \"/showmaps/:name\",\r\n        name: \"showmaps\",\r\n        // lazy-loaded\r\n        component: ShowMaps,\r\n        props: true,\r\n    },\r\n    {\r\n        path: \"/profile\",\r\n        name: \"profile\",\r\n        // lazy-loaded\r\n        component: Profile,\r\n    },\r\n    {\r\n        path: \"/admin\",\r\n        name: \"admin\",\r\n        // lazy-loaded\r\n        component: BoardAdmin,\r\n    },\r\n    {\r\n        path: \"/mod\",\r\n        name: \"moderator\",\r\n        // lazy-loaded\r\n        component: BoardModerator,\r\n    },\r\n    {\r\n        path: \"/user\",\r\n        name: \"user\",\r\n        // lazy-loaded\r\n        component: BoardUser,\r\n    },\r\n\r\n];\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes,\r\n});\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    const publicPages = ['/login', '/register', '/home'];\r\n    const authRequired = !publicPages.includes(to.path);\r\n    const loggedIn = localStorage.getItem('user');\r\n\r\n    // trying to access a restricted page + not logged in\r\n    // redirect to login page\r\n    if (authRequired && !loggedIn) {\r\n        next('/login');\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n\r\nexport default router;"]}]}